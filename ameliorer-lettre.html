<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Améliorer ma lettre - EmploiAvenir</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main class="container">
    <h1>Améliorez votre lettre de motivation</h1>
    <form id="uploadForm">
      <label for="fileInput">Choisissez votre fichier (.pdf ou .docx)</label><br>
      <input type="file" id="fileInput" accept=".pdf,.docx" required />
      <button type="submit" class="btn">Améliorer ma lettre</button>
    </form>

    <div id="outputContainer" style="margin-top:2rem; display:none;">
  <h2>Comparaison : Avant / Après</h2>
  <div style="display: flex; gap: 20px; flex-wrap: wrap;">
    <div style="flex: 1; min-width: 300px;">
      <h3>Lettre originale</h3>
      <textarea id="originalText" rows="20" style="width:100%;" readonly></textarea>
      <div style="margin-top: 1rem;">
<button id="downloadServerWordBtn" class="btn mt-2">📄 Télécharger en .docx</button>
</div>

    </div>
    <div style="flex: 1; min-width: 300px;">
      <h3>Lettre améliorée</h3>
      <textarea id="improvedText" rows="20" style="width:100%;" readonly></textarea>
      <div style="margin-top: 1rem;">
</div>

    </div>
  </div>
</div>

  </main>

  <script src="backend-openai/ameliorer-lettre.js"></script>
  <!-- Mammoth.js pour fichiers Word -->
<script src="https://unpkg.com/mammoth/mammoth.browser.min.js"></script>

<!-- pdf.js pour fichiers PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
<script>
  // Configuration PDF.js
  pdfjsLib.GlobalWorkerOptions.workerSrc = "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js";
</script>
<script src="backend-openai/ameliorer-lettre.js"></script>
<!-- === Début du Chatbot === -->
  <div id="chatbot-box" style="position: fixed; bottom: 20px; right: 20px; width: 300px; font-family: sans-serif;">
    <div id="chat-container" style="background: white; border: 1px solid #ccc; border-radius: 10px; padding: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); display: none;">
        <div id="chat-messages" style="height: 200px; overflow-y: auto; font-size: 0.9rem; margin-bottom: 10px;"></div>
        <input type="text" id="chat-input" placeholder="Posez votre question..." style="width: 75%;" />
        <button id="send-button" style="width: 23%;">Envoyer</button>
        <button id="reset-chat" style="margin-top: 5px; width: 100%; background-color: #F87171; color: white; border: none; border-radius: 5px; padding: 5px;">🗑️ Réinitialiser le chat</button>

    </div>
    <button id="toggle-chat" style="background: #8B5CF6; color: white; padding: 10px 20px; border: none; border-radius: 50px;">💬</button>
    
  </div>
  <!-- === Fin du Chatbot === -->
   <script src="./backend-openai/chatbot.js"></script>

</body>
</html>
